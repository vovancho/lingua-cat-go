# Описание проекта Lingua Cat Go

## Общая структура
Проект состоит из трех основных микросервисов:

![Scheme](project/scheme.png)

### 1. Dictionary Service
- **Назначение**: Управление словарями и переводами слов
- **Технологии**:
    - gRPC + REST API (grpc-gateway)
    - PostgreSQL
    - OpenAPI/Swagger
- **Основные функции**:
    - Получение случайных слов для упражнений
    - Управление словарями и переводами
    - Поддержка разных языков

### 2. Exercise Service
- **Назначение**: Управление упражнениями по изучению слов
- **Технологии**:
    - REST API
    - PostgreSQL
    - Outbox pattern для событий
    - gRPC клиент для Dictionary Service
- **Основные функции**:
    - Создание упражнений
    - Проверка переводов
    - Отслеживание прогресса
    - Публикация событий о завершении упражнений

### 3. Analytics Service
- **Назначение**: Анализ результатов упражнений
- **Технологии**:
    - REST API
    - ClickHouse
    - Kafka Consumer
- **Основные функции**:
    - Сбор статистики выполнения упражнений
    - Анализ времени выполнения
    - Подсчет правильных/неправильных ответов

## Общие компоненты

### Пакеты в `pkg/`
- `auth` - аутентификация через Keycloak
- `db` - работа с базами данных
- `error` - обработка ошибок
- `eventpublisher` - публикация событий
- `request` - обработка HTTP запросов
- `response` - форматирование ответов
- `tracing` - трассировка через Jaeger
- `translator` - локализация сообщений
- `txmanager` - управление транзакциями
- `validator` - валидация данных

### Инфраструктура
- Keycloak для авторизации
- Jaeger для трассировки
- Kafka для асинхронных событий
- Docker Compose для локальной разработки

## Основные паттерны
- Clean Architecture
- CQRS
- Outbox Pattern
- DDD (Domain-Driven Design)
- Dependency Injection (через Wire)

## База данных
- Миграции управляются через `golang-migrate`
- Каждый сервис имеет свою БД
- Поддержка транзакций и консистентности данных

## Тестирование
- Unit тесты для бизнес-логики
- Интеграционное тестирование через Docker
- AB-тестирование для API endpoints
